(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),i=n.n(r),s=(n(95),n(23)),c=n(16),l=n(37),u=n(34),d=n(38),g=n(53),p=n.n(g),h=n(76),f=n(17),m=n.n(f),v=n(77),b=n.n(v),k=(n(98),n(162)),w="public_profile,email,pages_show_list,pages_messaging,manage_pages,ads_read,ads_management,pages_messaging_subscriptions",E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).statusChangeCallback=function(e){"connected"===e.status?window.FB.api("/".concat(e.authResponse.userID,"/permissions"),function(t){t&&!t.error&&n.checkPermissions(n.props.requiredPermissions,t.data)&&(n.props.onLogin&&n.props.onLogin(!0,e.authResponse.accessToken),n.props.loginFunction(e.authResponse.accessToken))}):(n.props.onLogin&&n.props.onLogin(!1,e.authResponse.accessToken),n.props.logoutFunction())},n.fbLoginButton=null,n.widthController=null,n.state={loggedIn:e.loggedIn},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fbLoginButton.style.width="".concat(this.widthController.offsetWidth+20,"px");var e=this;!function(e,t,n){var a,o=e.getElementsByTagName(t)[0];e.getElementById(n)||((a=e.createElement(t)).id=n,a.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){window.FB.init({appId:window.SERVER_PARAMS.FACEBOOK_APP_ID,cookie:!0,xfbml:!0,version:"v3.1"}),window.FB.AppEvents.logPageView(),window.FB.getLoginStatus(function(t){e.statusChangeCallback(t)}),window.FB.Event.subscribe("auth.login",e.statusChangeCallback),window.FB.Event.subscribe("auth.logout",e.statusChangeCallback),e.fbLoginButton.onclick=function(){return window.FB.login(e.statusChangeCallback,{scope:w})}}}},{key:"componentDidUpdate",value:function(){this.fbLoginButton.style.width="".concat(this.widthController.offsetWidth+20,"px")}},{key:"checkPermissions",value:function(e,t){var n=e.split(",");if(t.length<n.length)return!1;for(var a=m.a.keyBy(t,"permission"),o=0;o<n.length;o++){var r=a[n[o]];if(!r||"granted"!==r.status)return!1}return!0}},{key:"render",value:function(){var e=this,t=this.props,n=t.additionalClassName,a=t.additionalWrapperClassName,r=this.props.loggedIn,i=r?"h-disabled":"";return o.a.createElement("div",{className:"fb-login-button-wrap ".concat(a||"")},o.a.createElement("div",{className:"my-fb-login-button ".concat(i," ").concat(n||""),ref:function(t){return e.fbLoginButton=t}},o.a.createElement("span",{ref:function(t){return e.widthController=t}},r?o.a.createElement("span",{className:"fb-button-text login"},"Connected with Facebook"):null===r?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"fb-button-text"},"Establishing connection with Facebook"),o.a.createElement(k.a,{size:"small",className:"h-padding-l-5"})):o.a.createElement("span",{className:"fb-button-text login"},"Connect Facebook account"))))}}]),t}(o.a.Component);E.defaultProps={requiredPermissions:w,logoutFunction:function(){}};var y=n(87),O=n(26),C=n(81),R=n.n(C),j=n(82),N=n.n(j),B=n(55),F=n(163),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return{duration:e?null:t,icon:o.a.createElement(B.a,{type:"check-circle",style:{color:"green"}}),placement:"bottomRight"}},I=function(e,t,n,a){F.a.error(Object(O.a)({},_(n,a),{icon:o.a.createElement(B.a,{type:"close-circle",style:{color:"red"}}),message:e,description:t}))},A=["get","post","put","delete"];function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=String(e).toLowerCase(),r=R.a[o];if(!m.a.includes(A,o))return Promise.reject('Not valid method "'.concat(e,'"'));var i=function(e){if(!e.ok)throw e.body;return e.body};if("get"===o){var s=a?N.a.stringify(n):n;return r(t).query(s).then(i)}return"delete"===o?r(t).then(i):r(t).type("json").send(n).then(i)}var L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultErrorHandler,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(s.a)(this,e),this.errorHandler=t,this.handleError=n}return Object(c.a)(e,null,[{key:"defaultErrorHandler",value:function(e){I("Error",JSON.stringify(e))}}]),Object(c.a)(e,[{key:"fetch",value:function(t){var n=this;return P(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).catch(function(t){return n.handleError&&n.errorHandler(t),e.ERROR})}},{key:"get",value:function(e,t){return this.fetch("GET",e,t)}},{key:"put",value:function(e,t){return this.fetch("PUT",e,t)}},{key:"post",value:function(e,t){return this.fetch("POST",e,t)}},{key:"delete",value:function(e,t){return this.fetch("DELETE",e,t)}},{key:"multiple",value:function(){for(var t=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return Promise.all(a.map(function(e){return P.apply(void 0,Object(y.a)(e))})).catch(function(n){return t.errorHandler(n),e.ERROR})}}],[{key:"isError",value:function(t){return t===e.ERROR}}]),e}();L.ERROR="ERROR";var x=new L,S=function(){var e=Object(h.a)(p.a.mark(function e(t,n){var a,o,r,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loggedIn,a=t.token,o="".concat("https://graph.facebook.com/v3.2/","me/accounts?limit=200&access_token=").concat(a),e.next=4,x.get(o);case 4:r=e.sent,i=JSON.parse(r).data,n(m.a.filter(i,function(e){return-1!==m.a.indexOf(e.tasks,"MANAGE")}));case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loggedIn:!1,token:"",pages:[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),o.a.createElement("p",null,"Edit ",o.a.createElement("code",null,"src/App.js")," and save to reload."),o.a.createElement("div",{className:"App-link"},o.a.createElement(E,{requiredPermissions:"pages_messaging_subscriptions",additionalWrapperClassName:"fb-button-margin-0 h-display-inline-block",additionalClassName:"h-margin-0",loggedIn:this.state.loggedIn,loginFunction:function(t){return e.setState({token:t,loggedIn:!0})},onLogin:function(t,n){S({loggedIn:t,token:n},function(t){return e.setState({pages:t})})}}))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},90:function(e,t,n){e.exports=n(161)},95:function(e,t,n){},98:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.079a1f2e.chunk.js.map