(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(15),i=n.n(r),s=(n(95),n(23)),c=n(16),l=n(50),u=n.n(l),d=n(73),g=n(17),p=n.n(g),h=n(74),f=n.n(h),m=(n(98),n(86)),v=n(75),b=n(87),k=n(162),w="public_profile,email,pages_show_list,pages_messaging,manage_pages,ads_read,ads_management,pages_messaging_subscriptions",E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).statusChangeCallback=function(e){"connected"===e.status?window.FB.api("/".concat(e.authResponse.userID,"/permissions"),function(t){t&&!t.error&&n.checkPermissions(n.props.requiredPermissions,t.data)&&(n.props.onLogin&&n.props.onLogin(!0,e.authResponse.accessToken),n.props.loginFunction(e.authResponse.accessToken))}):(n.props.onLogin&&n.props.onLogin(!1,e.authResponse.accessToken),n.props.logoutFunction())},n.fbLoginButton=null,n.widthController=null,n.state={loggedIn:e.loggedIn},n}return Object(b.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fbLoginButton.style.width="".concat(this.widthController.offsetWidth+20,"px");var e=this;!function(e,t,n){var o,a=e.getElementsByTagName(t)[0];e.getElementById(n)||((o=e.createElement(t)).id=n,o.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){window.FB.init({appId:window.SERVER_PARAMS.FACEBOOK_APP_ID,cookie:!0,xfbml:!0,version:"v3.1"}),window.FB.AppEvents.logPageView(),window.FB.getLoginStatus(function(t){e.statusChangeCallback(t)}),window.FB.Event.subscribe("auth.login",e.statusChangeCallback),window.FB.Event.subscribe("auth.logout",e.statusChangeCallback),e.fbLoginButton.onclick=function(){return window.FB.login(e.statusChangeCallback,{scope:w})}}}},{key:"componentDidUpdate",value:function(){this.fbLoginButton.style.width="".concat(this.widthController.offsetWidth+20,"px")}},{key:"checkPermissions",value:function(e,t){var n=e.split(",");if(t.length<n.length)return!1;for(var o=p.a.keyBy(t,"permission"),a=0;a<n.length;a++){var r=o[n[a]];if(!r||"granted"!==r.status)return!1}return!0}},{key:"render",value:function(){var e=this,t=this.props,n=t.additionalClassName,o=t.additionalWrapperClassName,r=this.props.loggedIn,i=r?"h-disabled":"";return a.a.createElement("div",{className:"fb-login-button-wrap ".concat(o||"")},a.a.createElement("div",{className:"my-fb-login-button ".concat(i," ").concat(n||""),ref:function(t){return e.fbLoginButton=t}},a.a.createElement("span",{ref:function(t){return e.widthController=t}},r?a.a.createElement("span",{className:"fb-button-text login"},"Connected with Facebook"):null===r?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"fb-button-text"},"Establishing connection with Facebook"),a.a.createElement(k.a,{size:"small",className:"h-padding-l-5"})):a.a.createElement("span",{className:"fb-button-text login"},"Connect Facebook account"))))}}]),t}(a.a.Component);E.defaultProps={requiredPermissions:w,logoutFunction:function(){}};var y=n(84),O=n(26),C=n(79),R=n.n(C),N=n(80),j=n.n(N),B=n(52),_=n(163),F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return{duration:e?null:t,icon:a.a.createElement(B.a,{type:"check-circle",style:{color:"green"}}),placement:"bottomRight"}},I=function(e,t,n,o){_.a.error(Object(O.a)({},F(n,o),{icon:a.a.createElement(B.a,{type:"close-circle",style:{color:"red"}}),message:e,description:t}))},A=["get","post","put","delete"];function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=String(e).toLowerCase(),r=R.a[a];if(!p.a.includes(A,a))return Promise.reject('Not valid method "'.concat(e,'"'));var i=function(e){if(!e.ok)throw e.body;return e.body};if("get"===a){var s=o?j.a.stringify(n):n;return r(t).query(s).then(i)}return"delete"===a?r(t).then(i):r(t).type("json").send(n).then(i)}var L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultErrorHandler,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(s.a)(this,e),this.errorHandler=t,this.handleError=n}return Object(c.a)(e,null,[{key:"defaultErrorHandler",value:function(e){I("Error",JSON.stringify(e))}}]),Object(c.a)(e,[{key:"fetch",value:function(t){var n=this;return P(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).catch(function(t){return n.handleError&&n.errorHandler(t),e.ERROR})}},{key:"get",value:function(e,t){return this.fetch("GET",e,t)}},{key:"put",value:function(e,t){return this.fetch("PUT",e,t)}},{key:"post",value:function(e,t){return this.fetch("POST",e,t)}},{key:"delete",value:function(e,t){return this.fetch("DELETE",e,t)}},{key:"multiple",value:function(){for(var t=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return Promise.all(o.map(function(e){return P.apply(void 0,Object(y.a)(e))})).catch(function(n){return t.errorHandler(n),e.ERROR})}}],[{key:"isError",value:function(t){return t===e.ERROR}}]),e}();L.ERROR="ERROR";var x=new L,S=function(){var e=Object(d.a)(u.a.mark(function e(t,n){var o,a,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loggedIn,o=t.token,a="".concat("https://graph.facebook.com/v3.2/","me/accounts?limit=200&access_token=").concat(o),e.next=4,x.get(a);case 4:r=e.sent,i=JSON.parse(r).data,n(p.a.filter(i,function(e){return-1!==p.a.indexOf(e.tasks,"MANAGE")}));case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),T=function(){function e(){Object(s.a)(this,e),this.state={loggedIn:!1,token:"",pages:[]}}return Object(c.a)(e,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null,"Edit ",a.a.createElement("code",null,"src/App.js")," and save to reload."),a.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(E,{requiredPermissions:"pages_messaging_subscriptions",additionalWrapperClassName:"fb-button-margin-0 h-display-inline-block",additionalClassName:"h-margin-0",loggedIn:this.state.loggedIn,loginFunction:function(t){return e.setState({token:t,loggedIn:!0})},onLogin:function(t,n){S({loggedIn:t,token:n},function(t){return e.setState({pages:t})})}}))))}}]),e}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},90:function(e,t,n){e.exports=n(161)},95:function(e,t,n){},98:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.66c8072c.chunk.js.map